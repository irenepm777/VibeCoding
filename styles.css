/* =========================================================
   VibeCoding — ¿Cuánto durarías en el Mesozoico?
   Estilo: editorial / museo / cuaderno de campo
   Sin frameworks. Responsive + accesible.
   ========================================================= */

/* --------- Reset básico --------- */
* { box-sizing: border-box; }
html:focus-within { scroll-behavior: smooth; }
body { margin: 0; }
img { max-width: 100%; display: block; }
button, input { font: inherit; }
a { color: inherit; }

/* --------- Variables base --------- */
:root{
  --bg: #f6f1ea;
  --surface: rgba(0,0,0,0.04);
  --surface-2: rgba(0,0,0,0.07);
  --text: #2b2520;
  --muted: #6b625a;
  --border: rgba(0,0,0,0.12);

  --accent: #c97a91;      /* rosa editorial */
  --accent-2: #b65f7a;

  /* Tipografía (sin fuentes externas): editorial / legible */
  --font-display: ui-serif, "Iowan Old Style", "Palatino Linotype", Palatino, Georgia, serif;
  --font-body: ui-sans-serif, system-ui, -apple-system, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif;
  --font-reading: ui-serif, Georgia, serif;

  --radius: 16px;
  --radius-sm: 12px;

  --shadow: 0 20px 60px rgba(0,0,0,0.45);
  --shadow-sm: 0 10px 30px rgba(0,0,0,0.35);

  --container: 1120px;
  --gap: 1.25rem;

  --focus: 2px solid rgba(255,255,255,0.9);

  --grain:
    linear-gradient(0deg, rgba(255,255,255,0.02), rgba(255,255,255,0.02)),
    repeating-linear-gradient(90deg, rgba(255,255,255,0.03) 0 1px, transparent 1px 3px);
}

/* --------- Temas por época (inmersivo) --------- */
body[data-era="triasico"]{
  --bg: #efe6dc;           /* tierra seca */
  --accent: #c07a3a;      /* arcilla */
  --accent-2: #8f4e2b;
  --era-wash:
    radial-gradient(900px 420px at 15% 20%, rgba(192,122,58,0.25), transparent 60%),
    radial-gradient(800px 500px at 80% 30%, rgba(143,78,43,0.20), transparent 65%);
}
body[data-era="jurasico"]{
  --bg: #e7f1ea;           /* verde húmedo */
  --accent: #4f8f6b;
  --accent-2: #2f6f55;
  --era-wash:
    radial-gradient(900px 420px at 15% 20%, rgba(79,143,107,0.25), transparent 60%),
    radial-gradient(800px 500px at 80% 30%, rgba(47,111,85,0.20), transparent 65%);
}
body[data-era="cretacico"]{
  --bg: #f3e9ef;           /* rosa ceniza / transición */
  --accent: #c97a91;
  --accent-2: #9e4f68;
  --era-wash:
    radial-gradient(900px 420px at 15% 20%, rgba(201,122,145,0.28), transparent 60%),
    radial-gradient(800px 500px at 80% 30%, rgba(158,79,104,0.22), transparent 65%);
}

body{
  font-family: var(--font-body);
  background: var(--bg);
  color: var(--text);
  line-height: 1.6;
  overflow-x: hidden;
}

/* Fondo con grano muy sutil */
body::before{
  content:"";
  position: fixed;
  inset: 0;
  pointer-events: none;
  background: var(--grain);
  mix-blend-mode: overlay;
  opacity: 0.35;
  z-index: -1;
}

/* Wash por época */
body::after{
  content:"";
  position: fixed;
  inset: -120px;
  pointer-events: none;
  background: var(--era-wash);
  filter: blur(0px);
  opacity: 0.9;
  z-index: -2;
}
/* Parallax dinosaur layer */
.parallax-layer{
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 0;
}

header,
main,
footer{
  position: relative;
  z-index: 3;
}


/* Reduce motion */
@media (prefers-reduced-motion: reduce){
  html:focus-within{ scroll-behavior: auto; }
  *{ transition: none !important; animation: none !important; }
}

/* --------- Utilidades --------- */
.container{
  width: min(var(--container), 100% - 2rem);
  margin: 0 auto;
}
.muted{ color: var(--muted); }
.small{ font-size: 0.92rem; }
.sr-only{
  position:absolute; width:1px; height:1px; padding:0; margin:-1px;
  overflow:hidden; clip:rect(0,0,0,0); white-space:nowrap; border:0;
}
.accent{ color: var(--accent); }

.skip-link{
  position:absolute; left: 0.75rem; top: -60px;
  background: rgba(255,255,255,0.92);
  color:#111;
  padding: 0.6rem 0.9rem;
  border-radius: 999px;
  z-index: 1000;
}
.skip-link:focus{ top: 0.75rem; outline: var(--focus); outline-offset: 2px; }

/* --------- Topbar / nav --------- */
.topbar{
  position: sticky;
  top: 0;
  z-index: 50;
  backdrop-filter: blur(10px);
  background: rgba(246,241,234,0.85);
  border-bottom: 1px solid var(--border);
}

.nav{
  display:flex;
  align-items:center;
  justify-content: space-between;
  gap: 1rem;
  width: min(var(--container), 100% - 2rem);
  margin: 0 auto;
  padding: 0.75rem 0;
}

.brand{
  display:flex;
  align-items:center;
  gap: 0.6rem;
  text-decoration:none;
}
.brand__mark{
  display:grid;
  place-items:center;
  width: 40px; height: 40px;
  border-radius: 999px;
  background: linear-gradient(180deg, rgba(255,255,255,0.08), rgba(255,255,255,0.02));
  border: 1px solid var(--border);
  box-shadow: var(--shadow-sm);
}
.brand__text{
  font-family: var(--font-display);
  letter-spacing: 0.06em;
  text-transform: uppercase;
  font-weight: 700;
  font-size: 0.95rem;
}

.nav__toggle{
  display:none;
  background: transparent;
  border: 1px solid var(--border);
  border-radius: 999px;
  padding: 0.55rem 0.75rem;
  color: var(--text);
}
.nav__toggle:focus{ outline: var(--focus); outline-offset: 2px; }

.burger{
  display:block;
  width: 18px; height: 2px;
  background: var(--text);
  position: relative;
}
.burger::before, .burger::after{
  content:"";
  position:absolute;
  left:0; right:0;
  height:2px;
  background: var(--text);
}
.burger::before{ top: -6px; }
.burger::after{ top: 6px; }

.nav__menu{
  list-style:none;
  display:flex;
  gap: 0.25rem;
  margin:0;
  padding:0;
  align-items:center;
}
.nav__link{
  text-decoration:none;
  padding: 0.6rem 0.85rem;
  border-radius: 999px;
  border: 1px solid transparent;
  color: var(--muted);
}
.nav__link:hover{ color: var(--text); }
.nav__link:focus{ outline: var(--focus); outline-offset: 2px; }
.nav__link[aria-current="page"]{
  color: var(--text);
  border-color: rgba(255,255,255,0.22);
  background: rgba(255,255,255,0.06);
}
.nav__link--cta{
  color: #0a0a0a;
  background: linear-gradient(135deg, var(--accent), var(--accent-2));
  border-color: rgba(255,255,255,0.12);
}

/* Mobile menu */
@media (max-width: 860px){
  .nav__toggle{ display:block; }
  .nav__menu{
    position:absolute;
    top: 64px;
    right: 1rem;
    left: 1rem;
    display:none;
    flex-direction:column;
    align-items: stretch;
    background: var(--surface-2);
    border: 1px solid var(--border);
    border-radius: var(--radius);
    padding: 0.6rem;
    box-shadow: var(--shadow);
  }
  .nav__menu.is-open{ display:flex; }
  .nav__link{ width: 100%; text-align:center; }
}

/* --------- Secciones --------- */
.section{
  padding: clamp(3.25rem, 6vw, 5rem) 0;
  position: relative;
  z-index: 1;
}
.section__header{
  margin-bottom: 1.75rem;
}
.section__title{
  font-family: var(--font-display);
  font-size: clamp(1.65rem, 2.4vw, 2.25rem);
  letter-spacing: 0.02em;
  margin: 0 0 0.6rem 0;
}
.section__subtitle{
  margin: 0;
  color: var(--muted);
  max-width: 70ch;
}

/* --------- Hero --------- */
.hero{
  padding: clamp(4.25rem, 8vw, 6rem) 0 3rem 0;
  position: relative;
  z-index: 1;
}
.hero__bg{
  position:absolute;
  inset: -120px;
  background:
    radial-gradient(900px 500px at 20% 25%, rgba(255,255,255,0.08), transparent 60%),
    radial-gradient(600px 450px at 85% 35%, rgba(255,255,255,0.05), transparent 65%),
    linear-gradient(180deg, rgba(0,0,0,0.55), transparent 55%);
  pointer-events:none;
}
.kicker{
  color: var(--muted);
  letter-spacing: 0.06em;
  text-transform: uppercase;
  font-size: 0.9rem;
  margin: 0 0 0.9rem 0;
}
.hero__title{
  font-family: var(--font-display);
  font-size: clamp(2.15rem, 4.3vw, 3.3rem);
  line-height: 1.1;
  margin: 0 0 1rem 0;
}
.hero__lead{
  max-width: 75ch;
  margin: 0 0 1.35rem 0;
  font-family: var(--font-reading);
  color: rgba(160, 73, 112, 0.86);
}
.hero__actions{
  display:flex;
  flex-wrap: wrap;
  gap: 0.75rem;
  margin-top: 1rem;
}
.hero__note{
  margin-top: 1.25rem;
  padding: 0.9rem 1rem;
  border-radius: var(--radius);
  border: 1px solid var(--border);
  background: rgba(255,255,255,0.04);
  color: var(--muted);
}

/* Buttons */
.btn{
  display:inline-flex;
  align-items:center;
  justify-content:center;
  gap: 0.5rem;
  text-decoration:none;
  padding: 0.75rem 1rem;
  border-radius: 999px;
  border: 1px solid rgba(255,255,255,0.14);
  background: linear-gradient(135deg, var(--accent), var(--accent-2));
  color: #0a0a0a;
  font-weight: 700;
  box-shadow: var(--shadow-sm);
}
.btn:hover{ filter: brightness(1.02); transform: translateY(-1px); }
.btn:focus{ outline: var(--focus); outline-offset: 3px; }
.btn--ghost{
  background: rgba(255,255,255,0.06);
  color: var(--text);
}

/* --------- Era selector cards --------- */
.era-grid{
  display:grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: var(--gap);
  margin-top: 1.25rem;
}
@media (max-width: 980px){
  .era-grid{ grid-template-columns: 1fr; }
}

.era-card{
  text-align:left;
  background: var(--surface);
  border: 1px solid var(--border);
  border-radius: var(--radius);
  padding: 1.1rem 1.1rem 1rem;
  cursor: pointer;
  box-shadow: var(--shadow-sm);
  transition: transform 180ms ease, background 180ms ease, border-color 180ms ease;
}
.era-card:hover{ transform: translateY(-2px); background: var(--surface-2); }
.era-card:focus{ outline: var(--focus); outline-offset: 3px; }
.era-card[aria-selected="true"]{
  border-color: var(--accent);
  background: var(--surface-2);
}

.era-card__tag{
  display:inline-block;
  font-weight: 800;
  letter-spacing: 0.06em;
  text-transform: uppercase;
  font-size: 0.8rem;
  color: var(--accent);
}
.era-card__title{
  display:block;
  font-family: var(--font-display);
  font-weight: 800;
  margin-top: 0.35rem;
  font-size: 1.2rem;
}
.era-card__meta{
  display:block;
  margin-top: 0.45rem;
  color: var(--muted);
  font-size: 0.95rem;
}

.callout{
  margin-top: 1rem;
  padding: 0.9rem 1rem;
  border-radius: var(--radius);
  border: 1px solid var(--border);
  background: var(--surface);
}

/* --------- Era sections --------- */
.era{
  border-top: 1px solid var(--border);
}
.era__header{
  margin-bottom: 1rem;
}
.era__title{
  font-family: var(--font-display);
  font-size: clamp(1.9rem, 3vw, 2.6rem);
  margin: 0;
}
.era__subtitle{
  margin: 0.35rem 0 0 0;
  color: var(--muted);
  max-width: 75ch;
}

.era__layout{
  display:grid;
  grid-template-columns: 1.6fr 1fr;
  gap: clamp(1rem, 3vw, 2rem);
  align-items: start;
  margin-top: 1.2rem;
}
@media (max-width: 980px){
  .era__layout{ grid-template-columns: 1fr; }
}

.era__text p{
  font-family: var(--font-reading);
  color: var(--text);
  max-width: 80ch;
}

.fact-grid{
  display:grid;
  grid-template-columns: repeat(3, minmax(0, 1fr));
  gap: 0.8rem;
  margin: 1.2rem 0 1rem;
}
@media (max-width: 820px){
  .fact-grid{ grid-template-columns: 1fr; }
}
.fact{
  border-radius: var(--radius);
  border: 1px solid var(--border);
  background: var(--surface);
  padding: 0.9rem 0.9rem 0.8rem;
}
.fact h3{
  font-family: var(--font-display);
  margin: 0 0 0.35rem 0;
  font-size: 1.05rem;
}
.fact p{ margin: 0; color: var(--muted); font-family: var(--font-body); }

.accordion{
  margin-top: 0.9rem;
  border-radius: var(--radius);
  border: 1px solid var(--border);
  background: var(--surface);
  padding: 0.2rem 0.8rem;
}
.accordion > summary{
  cursor: pointer;
  padding: 0.8rem 0.2rem;
  font-weight: 800;
  color: var(--text);
}
.accordion > summary:focus{ outline: var(--focus); outline-offset: 3px; border-radius: 8px; }
.accordion__content{
  padding: 0.1rem 0.2rem 1rem;
  color: var(--text);
}
.accordion__content h4{
  font-family: var(--font-display);
  margin: 0.75rem 0 0.3rem;
}
.accordion__content p{
  margin: 0 0 0.65rem;
  font-family: var(--font-reading);
}

/* Media / placeholders */
.era__media{
  border-radius: var(--radius);
  border: 1px solid var(--border);
  background: var(--surface);
  padding: 1rem;
  box-shadow: var(--shadow-sm);
}
.media__title{
  margin: 0 0 0.35rem 0;
  font-family: var(--font-display);
}
.media-grid{
  display: grid;
  grid-template-columns: 1fr;
  gap: 0.8rem;
  margin-top: 0.9rem;
}
@media (max-width: 980px){
  .media-grid{ grid-template-columns: 1fr; }
}
.media{
  border-radius: var(--radius-sm);
  overflow:hidden;
  border: 1px solid var(--border);
  background: var(--surface-2);
}
.media img{
  width: 100%;
  height: 160px;
  object-fit: cover;
  background:
    radial-gradient(220px 120px at 30% 30%, rgba(255,255,255,0.16), transparent 60%),
    linear-gradient(135deg, rgba(255,255,255,0.06), rgba(255,255,255,0.02));
}

.media figcaption{
  padding: 0.55rem 0.65rem;
  font-size: 0.9rem;
  color: var(--muted);
  border-top: 1px solid var(--border);
}
.tip{
  margin-top: 0.9rem;
  padding: 0.8rem 0.9rem;
  border-radius: var(--radius);
  border: 1px dashed var(--border);
  color: var(--muted);
}

/* --------- Calculator --------- */
/* --------- Calculator --------- */
.calc-layout{
  display:grid;
  grid-template-columns: 1fr 1.2fr;
  gap: clamp(1rem, 3vw, 2rem);
  align-items:start;
}
@media (max-width: 980px){
  .calc-layout{
    grid-template-columns: 1fr;
  }
}

.calc{
  border-radius: var(--radius);
  border: 1px solid var(--border);
  background: var(--surface);
  padding: 1rem;
  box-shadow: var(--shadow-sm);
}
.field{ margin-bottom: 0.9rem; }
.field label{
  display:block;
  font-weight: 800;
  margin-bottom: 0.35rem;
}
.field input{
  width: 100%;
  padding: 0.75rem 0.85rem;
  border-radius: 12px;
  border: 1px solid rgba(255,255,255,0.14);
  background: var(--surface-2);
  color: var(--text);
}
.field input:focus{ outline: var(--focus); outline-offset: 2px; }
.field__hint{ margin: 0.35rem 0 0; color: var(--muted); font-size: 0.9rem; }
.field__error{ margin: 0.35rem 0 0; color: #ffb3a6; font-weight: 700; min-height: 1.2em; }

.calc__actions{
  display:flex;
  flex-wrap: wrap;
  gap: 0.7rem;
  margin-top: 1rem;
}

/* Results */
.results{
  border-radius: var(--radius);
  border: 1px solid var(--border);
  background: var(--surface);
  padding: 1rem;
  box-shadow: var(--shadow-sm);
}
.results__head{ margin-bottom: 0.75rem; }
.results__title{
  margin: 0;
  font-family: var(--font-display);
  font-size: 1.4rem;
}

.result-grid{
  display:grid;
  grid-template-columns: repeat(3, minmax(0,1fr));
  gap: 0.8rem;
  margin-top: 0.75rem;
}
@media (max-width: 980px){
  .result-grid{ grid-template-columns: 1fr; }
}
.result-card{
  border-radius: var(--radius);
  border: 1px solid var(--border);
  background: var(--surface-2);
  overflow:hidden;
}
.result-card__head{
  padding: 0.8rem 0.85rem 0.65rem;
  border-bottom: 1px solid rgba(255,255,255,0.10);
  background: var(--surface);
}
.result-card__head h4{
  margin: 0;
  font-family: var(--font-display);
}
.result-card__time{
  margin: 0.25rem 0 0;
  font-weight: 900;
  color: var(--accent);
}
.result-card__body{
  padding: 0.75rem 0.85rem 0.9rem;
}
.result-card__why{ margin: 0 0 0.65rem; color: var(--text); font-family: var(--font-reading); }
.result-card__bullets{ margin: 0; padding-left: 1.1rem; color: var(--muted); }
.result-card__bullets li{ margin: 0.35rem 0; }

.chart-card{
  margin-top: 1rem;
  border-radius: var(--radius);
  border: 1px solid var(--border);
  background: var(--surface-2);
  overflow:hidden;
}
.chart-card__head{
  padding: 0.8rem 0.85rem 0.65rem;
  border-bottom: 1px solid rgba(255,255,255,0.10);
  background: var(--surface);
}
canvas{
  width: 100%;
  height: auto;
  display:block;
  background: transparent;
}

/* --------- Footer --------- */
.footer{
  padding: 2.75rem 0;
  border-top: 1px solid var(--border);
  position: relative;
  z-index: 1;
}
.footer__inner{
  color: var(--muted);
  font-family: var(--font-reading);
}

/* Focus ring for clickable cards */
.era-card:focus-visible,
.nav__link:focus-visible,
.btn:focus-visible,
input:focus-visible,
summary:focus-visible{
  outline: var(--focus);
  outline-offset: 3px;
}

.era__media,
.media,
.media img{
  position: relative;
  z-index: 4;
}



.parallax-layer{
  position: fixed;
  inset: 0;
  pointer-events: none;
  z-index: 20;
}

.parallax-layer img{
  position: absolute;
  left: -40%;
  bottom: 12%;
  width: 420px;
  background: transparent;
  pointer-events: none;
  opacity: 0;
  filter: drop-shadow(0 12px 20px rgba(0,0,0,0.25));
  transition: transform 0.1s linear, opacity 0.3s ease;
  transform: translateX(var(--dino-x, 0)) scaleX(var(--dino-flip, -1));
}

/* Ajustes de tamaño por era */
body[data-era="jurasico"] .parallax-layer img{
  width: 340px; /* braquiosaurio más contenido */
}

body[data-era="cretacico"] .parallax-layer img{
  width: 300px; /* T‑rex más compacto */
}

/* Dirección del dinosaurio por era */
/* Dirección del dinosaurio por era */
/* Coelophysis y braquiosaurio miran bien con flip negativo */
body[data-era="triasico"] .parallax-layer img{
  --dino-flip: -1;
}

body[data-era="jurasico"] .parallax-layer img{
  --dino-flip: -1;
}

/* El sprite del T‑rex viene mirando al lado contrario */
body[data-era="cretacico"] .parallax-layer img{
  --dino-flip: -1;
}
.calc-output{
  display: flex;
  flex-direction: column;
  gap: 1rem;
}

/* Explicación inferior a ancho completo */
.calc-explain{
  margin-top: clamp(1.5rem, 4vw, 2.5rem);
  padding-top: 1.25rem;
  border-top: 1px solid var(--border);
  max-width: 100%;
}

.calc-explain h3{
  font-family: var(--font-display);
  margin-top: 0;
}